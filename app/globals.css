@import "tailwindcss";

/* already have these from before */
@keyframes star-move-rotate-scale {
  from {
    transform: translateX(-20vw) rotate(0deg) scale(0);
  }
  to {
    transform: translateX(0) rotate(360deg) scale(1.5);
  }
}

/* replaces the old box-shadow tween with a drop-shadow pulse for SVGs */
@keyframes glow-pulse {
  0% {
    filter: drop-shadow(0 0 0 rgba(255, 255, 255, 0));
  }
  50% {
    filter: drop-shadow(0 0 36px rgba(255, 255, 255, 0.9));
  }
  100% {
    filter: drop-shadow(0 0 0 rgba(255, 255, 255, 0));
  }
}

/* soft radial aura behind the star wrapper */
@keyframes aura-pulse {
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.95);
  }
}

@keyframes shift-down {
  to {
    transform: translateY(-20%);
  }
}

/* new bits */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(28px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes vanish-all {
  to {
    opacity: 0;
  }
}

@keyframes elevate-up {
  from {
    transform: translateY(30px);
  }
  to {
    transform: translateY(0);
  }
}

@layer utilities {
  .star-wrapper {
    position: relative;
    display: inline-grid;
    place-items: center;
    will-change: transform;
    animation: star-move-rotate-scale 2.8s cubic-bezier(0.2, 0.8, 0.2, 1)
      forwards;
  }

  /* soft halo behind the star shape */
  .star-wrapper::after {
    content: "";
    position: absolute;
    inset: -12px;
    pointer-events: none;
    border-radius: 9999px;
    background: radial-gradient(
      circle,
      rgba(255, 255, 255, 0.65) 0%,
      rgba(255, 255, 255, 0) 70%
    );
    filter: blur(22px);
    opacity: 0;
    transform: scale(0.9);
    animation: aura-pulse 1.2s ease-in-out 2s forwards;
  }

  /* apply this to the actual <svg> star element */
  .glow-star {
    animation: glow-pulse 1.2s ease-in-out 2s forwards;
    will-change: filter;
  }

  /* combined sequence for the whole container */
  .sequence-seq {
    animation: elevate-up 1s ease 3s forwards, shift-down 2s ease 2.8s both,
      vanish-all 0.5s ease 5s forwards;
    will-change: transform, opacity;
  }

  /* Elevate text appears only after star + arc + glow finish */
  .elevate-text {
    opacity: 0;
    animation: fade-in-up 0.4s ease forwards;
    animation-delay: 3s;
  }

  /* Arc can also vanish at the end if desired */
  .arc {
    animation: vanish-all 0.5s ease 5s forwards;
    will-change: opacity;
  }

  /* accessibility */
  @media (prefers-reduced-motion: reduce) {
    .star-wrapper,
    .glow-star,
    .star-wrapper::after,
    .sequence-seq,
    .elevate-text,
    .arc {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      animation-delay: 0s !important;
    }
  }
}
